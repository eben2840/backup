{% extends 'base.html' %}

{% block body %}
<!-- <h6 style="background-color: rgba(0, 0, 255, 0.452); padding: 20px; border: 1px solid  rgb(255, 134, 154);; color:  rgb(255, 134, 154);; ">Click here <a href="#">here</a> to post an ad and start making money</h6> -->
<div class="container">
  <br>


  <form class="form-inline my-2 my-lg-0 mt-2 space" style="display: flex; padding-top: 20px; padding-bottom: 20px;" action="" method="post">
    {{ form.hidden_tag() }}
    {{form.search(class="form-control",style="width:85%; border: none", placeholder="Search for an item")}}
    <!-- {{form.submit(style="width: 15%; background-color:  rgb(255, 134, 154);;", class="btn btn-success")}} -->
    <button style="width: 15%; color:  rgb(255, 134, 154);; background-color: transparent; border: none;" class="btn btn-success" type="submit"><i class="fas fa-search"></i></button>

</form>
<br>
<!-- 
<form class="form-inline my-2 my-lg-0 mt-2" style="display: flex; padding-top: 20px; padding-bottom: 20px;" action="/searchal" method="POST">
    <input class="form-control" style="width:85%; padding: 20px;" type="search" name="q" placeholder="Search for a keyword" aria-label="Search">
    <button style="width: 15%; background-color:  rgb(255, 134, 154);;" class="btn btn-success" type="submit"><i class="fas fa-search"></i></button>
    {{form.submit}}
  </form> -->

<!-- Button trigger modal -->
 
<!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
  Launch static backdrop modal
</button> -->
  {% if cart|length >= 1 %}
  <a href="{{url_for('cart')}}" style="text-decoration: none;">
  <div style="width: 100%; background-color: rgb(255, 134, 154); font-weight: bold; color: white; padding: 26px; border-radius: 10px; display: flex; justify-content: space-between; " >
  <h6 style="margin-bottom: 0;">Click to view the {{cart|length}} items in your cartüòç</h6>
  
  <h6>{{cart|length}}</h6> 
  </div>
</a>
  {% else %}
    <div style="width: 100%; background-color: #c4c4c4; font-weight: bold; color: white; padding: 26px; border-radius: 10px; display: flex; justify-content: space-between; " >
    <h6 style="margin-bottom: 0;">There is nothing in your cart‚òπÔ∏è</h6>
    <h6>{{cart|length}}</h6> 
    </div>
  {% endif %}

  <br>
  <h4 class="sub-heading">Recently added items</h4>
  <br/>
  
  <!-- <div style="display: flex; flex-wrap: wrap; justify-content: space-between;"> -->
  

  <div class="row">
    {% for item in items %}
<!--     
    <div class="card" style="width: 30; margin-bottom: 10px; border: 1px solid rgba(0, 0, 0, 0.411); border-radius: 10px;">
        <a style="text-decoration: none;" href="{{url_for('preview', itemid=item.id)}}">
          <div style="width: 40vw; height: 40vh; text-align: center; overflow: hidden; ">
            <img style="width: 40vw; height: 40vh; border-radius: 10px; object-fit: cover;"  src="../static/items/{{item.image}}">
          </div>
            <div style="background-color: alice rgb(255, 134, 154);; padding: 10px; border-radius: 0 0 10px 10px;">  
              <h6 style="color: black;" >{{item.name}}</h6>
              <div style="display: flex; justify-content: space-between;">
                <h6 style="font-size: small;" class="text-muted">Ghc{{item.price}}</h6>
                {% if item.like %}
                <i style="color: rgba(0, 0, 255, 0.2);" class="fas fa-heart"></i>
                {% else %}
                <i class="fas fa-heart"></i>
                {% endif %}
              </div>
            </div>
        </a>
        </div> -->


<div class="col-md-4 col-6">
  <a style="text-decoration: none;" href="{{url_for('preview', itemid=item.id)}}">
  <div class="card space" style="margin-bottom: 5vh; padding: 0; border: none; border-radius: 0 0 10px 10px;">
      <img src="{{item.image}}" loading="lazy" style="object-fit: cover; width: 100%; height: 20vh;" alt="">
      <div style="background-color: rgb(255, 233, 237); padding: 10px; border-radius: 0 0 10px 10px;">  
        <h6 style="color: black;" >{{item.name}}</h6>
        <div style="display: flex; justify-content: space-between;">
          <h6 style="font-size: small;" class="text-muted">Ghc{{item.price}}</h6>
          <!-- {% if item.like %}
          <i style="color: rgb(0, 0, 255);" class="fas fa-heart"></i>
          {% else %}
          <i class="fas fa-heart"></i>
          {% endif %} -->
        </div>
      </div>
  </div>
  </a>
</div>
    {% endfor %}
</div>

<!-- Button trigger modal -->


<!-- Modal -->

{% if initial %}

<div class="modal fade " id="staticBackdrop" style="height: 100%;" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <img src="../static/flyer.jpeg" alt="night under the stars" style="width: 100%;" srcset="">
        <h6 style="text-align:center">Come and wind down this <span style="color:  rgb(255, 134, 154); font-weight: bold;"> Saturday, 26th November </span> at the talanku movie night, happening at <span style="color:  rgb(255, 134, 154); font-weight: bold;" >Pronto Hostels</span></h6>
      </div>
      <div style="display: flex; width:100%; margin-bottom: 3vh; justify-content: space-around;">
        <button type="button" class="button" style="width: 90%;" data-bs-dismiss="modal">Definately!!</button>
      </div>
    </div>
  </div>
</div>
{% endif %}

  
</div>

<script type="text/javascript">
  $(window).on('load', function() {
      $('#staticBackdrop').modal('show');
  });
</script>

<script>  

sessionStorage.setItem('cart', [])
  function ReLoadImages(){
      $('img[data-lazysrc]').each( function(){
          //* set the img src from data-src
          $( this ).attr( 'src', $( this ).attr( 'data-lazysrc' ) );
          }
      );
  }
  
  document.addEventListener('readystatechange', event => {
      if (event.target.readyState === "interactive") {  //or at "complete" if you want it to execute in the most last state of window.
          ReLoadImages();
      }
  });
  </script>
{% endblock %}
